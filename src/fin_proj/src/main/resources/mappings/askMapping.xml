<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="Ask">

	<insert id="insertAsk" parameterType="ask">
	<![CDATA[
		insert into ask(a_no,a_title,a_content,um_no,bm_no,a_status) values((select nvl(max(a_no),0)+1 from ask), #{a_title}, #{a_content}, #{um_no}, #{bm_no}, #{a_status})
	]]>
	</insert>
	
	<!--
	<select id="getAskList_T" resultType="ask">
	<![CDATA[
		select * from ask where a_title like '%'||#{searchKeyword}||'%' order by a_no desc
	]]>
	</select>
	
	<select id="getAskList_C" resultType="ask">
	<![CDATA[
		select * from ask where a_content like '%'||#{searchKeyword}||'%' order by a_no desc
	]]>
	</select>
	-->
	
	<select id="getAskList" resultType="ask">
	
		select * 
		from ask 
		where 1 = 1
		<if test="searchCondition == 'TITLE'">
			and a_title like '%'||#{searchKeyword}||'%' 
		</if>
		<if test="searchCondition == 'CONTENT'">
			and a_content like '%'||#{searchKeyword}||'%'
		</if>
		order by a_no desc
	
	</select>
	
	<select id="getAsk" resultType="ask">
	<![CDATA[
		select * from ask where a_no = #{a_no}
	]]>
	</select>
	
	<update id="updateAsk">
	<![CDATA[
		update ask set a_title = #{a_title}, a_content = #{a_content} where a_no = #{a_no}
	]]>
	</update>
	
	<delete id="deleteAsk">
	<![CDATA[
		delete from ask where a_no = #{a_no}
	]]>
	</delete>
	
</mapper>  

<!-- ' <![CDATA[ sql query문 ]]> ' : sql query안의 연산자를 elements로 인식하지 않도록 붙여줘야 하는 것. -->
  